var Ne=Object.defineProperty;var Oe=(e,t,n)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var X=(e,t,n)=>(Oe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();function D(){}function me(e){return e()}function ce(){return Object.create(null)}function A(e){e.forEach(me)}function te(e){return typeof e=="function"}function ge(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function je(e){return Object.keys(e).length===0}function m(e,t){e.appendChild(t)}function C(e,t,n){e.insertBefore(t,n||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function b(e){return document.createElement(e)}function ne(e){return document.createTextNode(e)}function j(){return ne(" ")}function ye(){return ne("")}function H(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function He(e){return Array.from(e.childNodes)}function ue(e,t){e.value=t??""}function fe(e,t,n){e.classList.toggle(t,!!n)}let V;function K(e){V=e}function Te(){if(!V)throw new Error("Function called outside component initialization");return V}function Ae(e){Te().$$.before_update.push(e)}const U=[],Z=[];let J=[];const de=[],we=Promise.resolve();let x=!1;function ve(){x||(x=!0,we.then(be))}function Ce(){return ve(),we}function ee(e){J.push(e)}const Y=new Set;let R=0;function be(){if(R!==0)return;const e=V;do{try{for(;R<U.length;){const t=U[R];R++,K(t),Pe(t.$$)}}catch(t){throw U.length=0,R=0,t}for(K(null),U.length=0,R=0;Z.length;)Z.pop()();for(let t=0;t<J.length;t+=1){const n=J[t];Y.has(n)||(Y.add(n),n())}J.length=0}while(U.length);for(;de.length;)de.pop()();x=!1,Y.clear(),K(e)}function Pe(e){if(e.fragment!==null){e.update(),A(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}function Be(e){const t=[],n=[];J.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),J=t}const G=new Set;let B;function ie(){B={r:0,c:[],p:B}}function le(){B.r||A(B.c),B=B.p}function T(e,t){e&&e.i&&(G.delete(e),e.i(t))}function q(e,t,n,i){if(e&&e.o){if(G.has(e))return;G.add(e),B.c.push(()=>{G.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function Q(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ke(e,t){q(e,1,1,()=>{t.delete(e.key)})}function $e(e,t,n,i,r,u,o,s,c,l,d,a){let f=e.length,h=u.length,I=f;const $={};for(;I--;)$[e[I].key]=I;const S=[],p=new Map,_=new Map,M=[];for(I=h;I--;){const w=a(r,u,I),L=n(w);let k=o.get(L);k?i&&M.push(()=>k.p(w,t)):(k=l(L,w),k.c()),p.set(L,S[I]=k),L in $&&_.set(L,Math.abs(I-$[L]))}const O=new Set,z=new Set;function F(w){T(w,1),w.m(s,d),o.set(w.key,w),d=w.first,h--}for(;f&&h;){const w=S[h-1],L=e[f-1],k=w.key,E=L.key;w===L?(d=w.first,f--,h--):p.has(E)?!o.has(k)||O.has(k)?F(w):z.has(E)?f--:_.get(k)>_.get(E)?(z.add(k),F(w)):(O.add(E),f--):(c(L,o),f--)}for(;f--;){const w=e[f];p.has(w.key)||c(w,o)}for(;h;)F(S[h-1]);return A(M),S}function Ie(e){e&&e.c()}function re(e,t,n){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),ee(()=>{const u=e.$$.on_mount.map(me).filter(te);e.$$.on_destroy?e.$$.on_destroy.push(...u):A(u),e.$$.on_mount=[]}),r.forEach(ee)}function se(e,t){const n=e.$$;n.fragment!==null&&(Be(n.after_update),A(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function qe(e,t){e.$$.dirty[0]===-1&&(U.push(e),ve(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Le(e,t,n,i,r,u,o,s=[-1]){const c=V;K(e);const l=e.$$={fragment:null,ctx:[],props:u,update:D,not_equal:r,bound:ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ce(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};o&&o(l.root);let d=!1;if(l.ctx=n?n(e,t.props||{},(a,f,...h)=>{const I=h.length?h[0]:f;return l.ctx&&r(l.ctx[a],l.ctx[a]=I)&&(!l.skip_bound&&l.bound[a]&&l.bound[a](I),d&&qe(e,a)),f}):[],l.update(),d=!0,A(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){const a=He(t.target);l.fragment&&l.fragment.l(a),a.forEach(N)}else l.fragment&&l.fragment.c();t.intro&&T(e.$$.fragment),re(e,t.target,t.anchor),be()}K(c)}class Se{constructor(){X(this,"$$");X(this,"$$set")}$destroy(){se(this,1),this.$destroy=D}$on(t,n){if(!te(n))return D;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ze="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ze);function W(e=10){return Math.random().toString(36).substring(2,e+2)}function ae(e,t,n){const i=e.slice();return i[9]=t[n],i}function Fe(e){let t;return{c(){t=b("i"),y(t,"class","fas fa-folder fa-lg")},m(n,i){C(n,t,i)},d(n){n&&N(t)}}}function Re(e){let t;return{c(){t=b("i"),y(t,"class","fas fa-folder-open fa-lg")},m(n,i){C(n,t,i)},d(n){n&&N(t)}}}function he(e,t){let n,i,r;function u(){return t[7](t[9])}return i=new Ee({props:{item:t[9],deleteItem:u}}),{key:e,first:null,c(){n=ye(),Ie(i.$$.fragment),this.first=n},m(o,s){C(o,n,s),re(i,o,s),r=!0},p(o,s){t=o;const c={};s&1&&(c.item=t[9]),s&1&&(c.deleteItem=u),i.$set(c)},i(o){r||(T(i.$$.fragment,o),r=!0)},o(o){q(i.$$.fragment,o),r=!1},d(o){o&&N(n),se(i,o)}}}function Ue(e){let t,n,i,r,u,o,s,c,l,d,a,f,h,I,$,S,p,_=[],M=new Map,O,z,F;function w(v,g){return v[0].open?Re:Fe}let L=w(e),k=L(e),E=Q(e[0].children);const oe=v=>v[9].id;for(let v=0;v<E.length;v+=1){let g=ae(e,E,v),P=oe(g);M.set(P,_[v]=he(P,g))}return{c(){t=b("div"),n=b("div"),i=b("div"),r=b("button"),k.c(),u=j(),o=b("div"),s=b("input"),c=j(),l=b("div"),d=ne(`Â 
            `),a=b("button"),a.innerHTML='<i class="fas fa-plus"></i>',f=j(),h=b("button"),h.innerHTML='<i class="fas fa-edit"></i>',I=j(),$=b("button"),$.innerHTML='<i class="fas fa-trash"></i>',S=j(),p=b("div");for(let v=0;v<_.length;v+=1)_[v].c();y(r,"class","svelte-y48wdp"),y(i,"class","folder svelte-y48wdp"),y(s,"type","text"),y(s,"autocomplete","off"),y(s,"class","svelte-y48wdp"),y(o,"class","title svelte-y48wdp"),y(a,"class","action svelte-y48wdp"),y(h,"class","action edit svelte-y48wdp"),y($,"class","action delete svelte-y48wdp"),y(l,"class","actions svelte-y48wdp"),y(n,"class","current svelte-y48wdp"),y(p,"class","children svelte-y48wdp"),fe(p,"hidden",!e[0].open),y(t,"class","item svelte-y48wdp")},m(v,g){C(v,t,g),m(t,n),m(n,i),m(i,r),k.m(r,null),m(n,u),m(n,o),m(o,s),ue(s,e[0].title),e[6](s),m(n,c),m(n,l),m(l,d),m(l,a),m(l,f),m(l,h),m(l,I),m(l,$),m(t,S),m(t,p);for(let P=0;P<_.length;P+=1)_[P]&&_[P].m(p,null);O=!0,z||(F=[H(r,"click",e[2]),H(s,"input",e[5]),H(a,"click",e[3]),H(h,"click",e[4]),H($,"click",function(){te(e[1])&&e[1].apply(this,arguments)})],z=!0)},p(v,[g]){e=v,L!==(L=w(e))&&(k.d(1),k=L(e),k&&(k.c(),k.m(r,null))),g&1&&s.value!==e[0].title&&ue(s,e[0].title),g&1&&(E=Q(e[0].children),ie(),_=$e(_,g,oe,1,e,E,M,p,ke,he,null,ae),le()),(!O||g&1)&&fe(p,"hidden",!e[0].open)},i(v){if(!O){for(let g=0;g<E.length;g+=1)T(_[g]);O=!0}},o(v){for(let g=0;g<_.length;g+=1)q(_[g]);O=!1},d(v){v&&N(t),k.d(),e[6](null);for(let g=0;g<_.length;g+=1)_[g].d();z=!1,A(F)}}}function De(e,t,n){let{item:i={id:"ID",title:"TITLE",children:[]}}=t;console.log({...i}),i.open===void 0&&(i.open=!0);let r;const u=()=>{n(0,i.open=!i.open,i)},o=()=>{let f=W();r=f,i.children.push({id:f,open:!0,isNew:!0,title:W(),children:[]}),n(0,i.open=!0,i),n(0,i)},s=()=>{i.ref.focus()};let{deleteItem:c=(f,h)=>(console.log("delete is not defined",{id:f,items:h}),h)}=t;Ae(async()=>{await Ce();const f=i.children.find(h=>h.id===r);f&&(f.ref.focus(),r=null)});function l(){i.title=this.value,n(0,i)}function d(f){Z[f?"unshift":"push"](()=>{i.ref=f,n(0,i)})}const a=f=>{n(0,i.children=i.children.filter(h=>h.id!==f.id),i)};return e.$$set=f=>{"item"in f&&n(0,i=f.item),"deleteItem"in f&&n(1,c=f.deleteItem)},[i,c,u,o,s,l,d,a]}class Ee extends Se{constructor(t){super(),Le(this,t,De,Ue,ge,{item:0,deleteItem:1})}}function pe(e,t,n){const i=e.slice();return i[6]=t[n],i}function Je(e){let t;return{c(){t=b("div"),t.textContent="No sources added yet",y(t,"class","empty")},m(n,i){C(n,t,i)},p:D,i:D,o:D,d(n){n&&N(t)}}}function Ke(e){let t,n=[],i=new Map,r,u=Q(e[0]);const o=s=>s[6].id;for(let s=0;s<u.length;s+=1){let c=pe(e,u,s),l=o(c);i.set(l,n[s]=_e(l,c))}return{c(){t=b("div");for(let s=0;s<n.length;s+=1)n[s].c();y(t,"class","content")},m(s,c){C(s,t,c);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(t,null);r=!0},p(s,c){c&1&&(u=Q(s[0]),ie(),n=$e(n,c,o,1,s,u,i,t,ke,_e,null,pe),le())},i(s){if(!r){for(let c=0;c<u.length;c+=1)T(n[c]);r=!0}},o(s){for(let c=0;c<n.length;c+=1)q(n[c]);r=!1},d(s){s&&N(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function _e(e,t){let n,i,r;function u(){return t[4](t[6])}return i=new Ee({props:{item:t[6],deleteItem:u}}),{key:e,first:null,c(){n=ye(),Ie(i.$$.fragment),this.first=n},m(o,s){C(o,n,s),re(i,o,s),r=!0},p(o,s){t=o;const c={};s&1&&(c.item=t[6]),s&1&&(c.deleteItem=u),i.$set(c)},i(o){r||(T(i.$$.fragment,o),r=!0)},o(o){q(i.$$.fragment,o),r=!1},d(o){o&&N(n),se(i,o)}}}function Ve(e){let t,n,i,r,u,o,s,c,l,d,a,f,h;const I=[Ke,Je],$=[];function S(p,_){return p[0].length?0:1}return l=S(e),d=$[l]=I[l](e),{c(){t=b("div"),n=b("div"),i=b("button"),i.innerHTML=`<i class="fas fa-plus"></i>
            Add root source`,r=j(),u=b("button"),u.innerHTML=`<i class="fas fa-plus-square"></i> / <i class="fas fa-minus-square"></i>
            Toggle all`,o=j(),s=b("button"),s.textContent="Save",c=j(),d.c(),y(i,"class","svelte-usunj3"),y(u,"class","svelte-usunj3"),y(s,"class","svelte-usunj3"),y(n,"class","actions svelte-usunj3"),y(t,"class","items svelte-usunj3")},m(p,_){C(p,t,_),m(t,n),m(n,i),m(n,r),m(n,u),m(n,o),m(n,s),m(t,c),$[l].m(t,null),a=!0,f||(h=[H(i,"click",e[1]),H(u,"click",e[2]),H(s,"click",e[3])],f=!0)},p(p,[_]){let M=l;l=S(p),l===M?$[l].p(p,_):(ie(),q($[M],1,1,()=>{$[M]=null}),le(),d=$[l],d?d.p(p,_):(d=$[l]=I[l](p),d.c()),T(d,1),d.m(t,null))},i(p){a||(T(d),a=!0)},o(p){q(d),a=!1},d(p){p&&N(t),$[l].d(),f=!1,A(h)}}}function Me(e){const t={...e};return delete t.open,delete t.ref,delete t.isNew,t.children=t.children.map(Me),t}function Ge(e,t,n){let{items:i=[]}=t;const r=()=>{i.push({id:W(),open:!0,title:W(),children:[],isNew:!0}),n(0,i)},u=(l,d)=>{l.open=d;for(const a of l.children)u(a,d)},o=()=>{if(!i.length)return;const d=!i[0].open;for(const a of i)u(a,d);n(0,i)},s=()=>{alert(JSON.stringify(i.map(Me)))},c=l=>{n(0,i=i.filter(d=>d.id!==l.id))};return e.$$set=l=>{"items"in l&&n(0,i=l.items)},[i,r,o,s,c]}class Qe extends Se{constructor(t){super(),Le(this,t,Ge,Ve,ge,{items:0})}}const We=[{id:"1",title:"root 1",children:[{id:"2",title:"inner 1.1",children:[]},{id:"3",title:"inner 1.2",children:[]},{id:"4",title:"inner 1.3",children:[{id:"5",title:"inner 1.3.1",children:[]},{id:"6",title:"inner 1.3.2",children:[]},{id:"7",title:"inner 1.3.3",children:[]}]}]},{id:"8",title:"root 2",children:[{id:"9",title:"inner 2.1",children:[]},{id:"10",title:"inner 2.2",children:[{id:"11",title:"inner 2.2.1",children:[]},{id:"12",title:"inner 2.2.2",children:[]},{id:"13",title:"inner 2.2.3",children:[]}]},{id:"14",title:"inner 2.3",children:[]}]}];new Qe({target:document.getElementById("app"),props:{items:We}});
